{% extends 'base.html' %}

{% block title %}Welcome to AutoFix{% endblock %}

{% load static bootstrap5 %}

{% bootstrap_css %}
{% bootstrap_javascript %}

{% block content %}
<!-- Flash Section -->
<section class="flash-images">
    <div class="flash-wrapper">
        <img src="{% static 'img/car4.png' %}" alt="Welcome to AutoFix" class="flash-image active">
        <img src="{% static 'img/slider/slider-img-1.png' %}" alt="AI Car Assistance" class="flash-image">
        <img src="{% static 'img/slider/slider-img-2.png' %}" alt="Auto Maintenance Reminder" class="flash-image">
    </div>
</section>

<!-- Features Section -->
<section class="features py-5 bg-light">
    <div class="container">
        <h2 class="text-center text-dark mb-5">Why Choose AutoFix?</h2>
        <div class="row justify-content-center">
            <!-- Feature 1 -->
            <div class="col-md-4 mb-4">
                <div class="feature-card card border-0 shadow-lg text-center p-4 h-100">
                    <div class="card-body">
                        <img src="{% static 'img/feature-1.png' %}" alt="AI Service" class="mb-3" style="width: 80px;">
                        <h5 class="card-title text-dark">AI-Powered Assistance</h5>
                        <p class="card-text">Smart troubleshooting system to diagnose and guide your car repairs.</p>
                    </div>
                </div>
            </div>
            <!-- Feature 2 -->
            <div class="col-md-4 mb-4">
                <div class="feature-card card border-0 shadow-lg text-center p-4 h-100">
                    <div class="card-body">
                        <img src="{% static 'img/feature-2.png' %}" alt="Reminders" class="mb-3" style="width: 80px;">
                        <h5 class="card-title text-dark">Automatic Health Reminders</h5>
                        <p class="card-text">Never forget a checkup. We notify you when your car needs attention.</p>
                    </div>
                </div>
            </div>
            <!-- Feature 3 -->
            <div class="col-md-4 mb-4">
                <div class="feature-card card border-0 shadow-lg text-center p-4 h-100">
                    <div class="card-body">
                        <img src="{% static 'img/feature-3.png' %}" alt="Location Services" class="mb-3" style="width: 80px;">
                        <h5 class="card-title text-dark">Location-Based Services</h5>
                        <p class="card-text">Find garages near you, matched to your car model and issue.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="testimonials py-5">
    <h2 class="text-center text-dark mb-5">What Our Users Are</h2>
    
<div class="row justify-content-center mt-5">
    {% for review in reviews %}
    <div class="col-md-4 mb-4">
        <div class="testimonial-card p-4 shadow-lg rounded bg-dark text-white">
            <div class="rating mb-2" style="color: orange; font-size: 20px;">
                {{ review.rating }}â˜…
            </div>
            <p class="fst-italic">"{{ review.comment }}"</p>
            <p>
                <strong>{{ review.user.username }}</strong><br>
                Workshop: {{ review.workshop.name }}<br>
                Service: {{ review.service.name }}
            </p>
            <small class="text-muted">{{ review.created_at|date:"Y-m-d H:i" }}</small>
        </div>
    </div>
    {% empty %}
    <p class="text-light" style="background-color: #e18b52;">No reviews yet.</p>
    {% endfor %}
</div>

<section class="cta py-5" style="background-color: #e18b52;">
    <div class="container text-center">
        <h2 class="text-white mb-4">Get Started with AutoFix Today!</h2>
        <p class="text-white mb-4">Sign up now to enjoy smart, efficient, and AI-powered car maintenance services.</p>
        <a href="{% url 'accounts:register' %}" class="btn btn-lg btn-dark">Join Now</a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<style>
/* Flash Section Styles */
.flash-images {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
}
.flash-wrapper {
    width: 100%;
    height: 100%;
    position: relative;
}
.flash-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    z-index: 0;
}
.flash-image.active {
    opacity: 1;
    z-index: 1;
}

/* Card Styles */
.feature-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 20px;
}
.feature-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const images = document.querySelectorAll(".flash-image");
        let index = 0;
        setInterval(() => {
            images.forEach(img => img.classList.remove("active"));
            index = (index + 1) % images.length;
            images[index].classList.add("active");
        }, 3000);
    });
</script>
{% endblock %}
